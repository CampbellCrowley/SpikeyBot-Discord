<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>SpikeyBot-Discord Index</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.slate.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">SpikeyBot-Discord</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="module-lib_twemojiChecker.html">lib/twemojiChecker</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="ChatBot.html">ChatBot</a></li><li><a href="CmdScheduling.html">CmdScheduling</a></li><li><a href="CmdScheduling-ScheduledCommand.html">CmdScheduling~ScheduledCommand</a></li><li><a href="Command.html">Command</a></li><li><a href="Command-CommandSetting.html">Command~CommandSetting</a></li><li><a href="Command-SingleCommand.html">Command~SingleCommand</a></li><li><a href="Common.html">Common</a></li><li><a href="Connect4.html">Connect4</a></li><li><a href="Connect4_Game.html">Connect4#Game</a></li><li><a href="Define.html">Define</a></li><li><a href="DevCmds.html">DevCmds</a></li><li><a href="Echo.html">Echo</a></li><li><a href="Echo-Character.html">Echo~Character</a></li><li><a href="FunTranslators.html">FunTranslators</a></li><li><a href="HG.html">HG</a></li><li><a href="HGWeb.html">HGWeb</a></li><li><a href="HungryGames.html">HungryGames</a></li><li><a href="HungryGames-ArenaEvent.html">HungryGames~ArenaEvent</a></li><li><a href="HungryGames-Battle.html">HungryGames~Battle</a></li><li><a href="HungryGames-Day.html">HungryGames~Day</a></li><li><a href="HungryGames-DefaultOptions.html">HungryGames~DefaultOptions</a></li><li><a href="HungryGames-DefaultOptions-BooleanOption.html">HungryGames~DefaultOptions~BooleanOption</a></li><li><a href="HungryGames-DefaultOptions-NumberOption.html">HungryGames~DefaultOptions~NumberOption</a></li><li><a href="HungryGames-DefaultOptions-ObjectOption.html">HungryGames~DefaultOptions~ObjectOption</a></li><li><a href="HungryGames-DefaultOptions-Option.html">HungryGames~DefaultOptions~Option</a></li><li><a href="HungryGames-DefaultOptions-SelectOption.html">HungryGames~DefaultOptions~SelectOption</a></li><li><a href="HungryGames-Event.html">HungryGames~Event</a></li><li><a href="HungryGames-FinalEvent.html">HungryGames~FinalEvent</a></li><li><a href="HungryGames-ForcedOutcome.html">HungryGames~ForcedOutcome</a></li><li><a href="HungryGames-Game.html">HungryGames~Game</a></li><li><a href="HungryGames-Grammar.html">HungryGames~Grammar</a></li><li><a href="HungryGames-GuildGame.html">HungryGames~GuildGame</a></li><li><a href="HungryGames-Messages.html">HungryGames~Messages</a></li><li><a href="HungryGames-OutcomeProbabilities.html">HungryGames~OutcomeProbabilities</a></li><li><a href="HungryGames-Player.html">HungryGames~Player</a></li><li><a href="HungryGames-Simulator.html">HungryGames~Simulator</a></li><li><a href="HungryGames-Simulator-Worker.html">HungryGames~Simulator~Worker</a></li><li><a href="HungryGames-Team.html">HungryGames~Team</a></li><li><a href="HungryGames-UserIconUrl.html">HungryGames~UserIconUrl</a></li><li><a href="HungryGames-WeaponEvent.html">HungryGames~WeaponEvent</a></li><li><a href="Main.html">Main</a></li><li><a href="MainModule.html">MainModule</a></li><li><a href="Messages.html">Messages</a></li><li><a href="Moderation.html">Moderation</a></li><li><a href="ModLog.html">ModLog</a></li><li><a href="ModLog-Settings.html">ModLog~Settings</a></li><li><a href="Music.html">Music</a></li><li><a href="NPC.html">NPC</a></li><li><a href="Patreon.html">Patreon</a></li><li><a href="Patreon-toExport.html">Patreon~toExport</a></li><li><a href="Polling.html">Polling</a></li><li><a href="Polling-Poll.html">Polling~Poll</a></li><li><a href="RaidBlock.html">RaidBlock</a></li><li><a href="RaidBlock-RaidSettings.html">RaidBlock~RaidSettings</a></li><li><a href="RoleColors.html">RoleColors</a></li><li><a href="RoleManager.html">RoleManager</a></li><li><a href="Sandbox.html">Sandbox</a></li><li><a href="SMLoader.html">SMLoader</a></li><li><a href="SpikeyBot.html">SpikeyBot</a></li><li><a href="Spotify.html">Spotify</a></li><li><a href="SubModule.html">SubModule</a></li><li><a href="TicTacToe.html">TicTacToe</a></li><li><a href="TicTacToe_Game.html">TicTacToe#Game</a></li><li><a href="TTS.html">TTS</a></li><li><a href="Uno.html">Uno</a></li><li><a href="Uno_Card.html">Uno#Card</a></li><li><a href="Uno_Game.html">Uno#Game</a></li><li><a href="WebAccount.html">WebAccount</a></li><li><a href="WebCommands.html">WebCommands</a></li><li><a href="WebProxy.html">WebProxy</a></li><li><a href="WebSettings.html">WebSettings</a></li><li><a href="WebStats.html">WebStats</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="global.html#__stack">__stack</a></li><li><a href="global.html#self">self</a></li><li><a href="global.html#unhandledRejection">unhandledRejection</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="externals.list.html" class="dropdown-toggle" data-toggle="dropdown">Externals<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="external-Discord.html">Discord</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	
	











	
	





    <section class="readme-section">
        <article><p><a href="https://status.spikeybot.com"><img src="https://img.shields.io/uptimerobot/status/m781846555-8613c83984f05f6c963656da.svg?label=SpikeyBot.com" alt="SpikeyBot.com Status"></a>
<a href="https://www.spikeybot.com"><img src="https://img.shields.io/badge/endpoint.svg?url=https://www.spikeybot.com/stats/shield" alt="Server Count"></a>
<a href="https://discord.gg/ZbKfYSQ"><img src="https://discordapp.com/api/guilds/420045052690169856/embed.png" alt="Discord Support Server"></a>
<a href="https://travis-ci.com/CampbellCrowley/SpikeyBot-Discord"><img src="https://travis-ci.org/CampbellCrowley/SpikeyBot-Discord.svg?branch=master" alt="Build Status"></a>
<a href="https://github.com/CampbellCrowley/SpikeyBot-Discord"><img src="https://img.shields.io/github/package-json/v/CampbellCrowley/SpikeyBot-Discord.svg" alt="SpikeyBot Version"></a>
<a href="https://david-dm.org/CampbellCrowley/SpikeyBot-Discord"><img src="https://david-dm.org/CampbellCrowley/SpikeyBot-Discord.svg" alt="Dependencies Status"></a>
<a href="https://github.com/CampbellCrowley/SpikeyBot-Discord"><img src="https://img.shields.io/github/last-commit/CampbellCrowley/SpikeyBot-Discord.svg" alt="Last Commit"></a>
<a href="https://www.patreon.com/CampbellCrowley"><img src="https://img.shields.io/badge/donate-patreon-F96854.svg" alt="Patreon"></a>
<a href="https://www.paypal.me/SpikeyBot"><img src="https://img.shields.io/badge/donate-paypal-0070BA.svg" alt="PayPal"></a></p>
<h3>Bot's website: <a href="https://www.spikeybot.com/">SpikeyBot.com</a></h3>
<h3>Support my development: <a href="https://www.patreon.com/campbellcrowley/">Patreon</a> <a href="https://www.paypal.me/spikeybot">PayPal</a></h3>
<h1>Commands</h1>
<h6><a href="https://www.spikeybot.com/help/">Web Page with most commands available on the bot's website</a></h6>
<h2>Hidden Commands</h2>
<h3>These commands are not included in the normal help page or <code>help</code> command because they are either easter-eggs, developer commands, or just not useful for most users.</h3>
<ul>
<li>git (Get the git commit log, or run a git command)</li>
<li>js (Run sandboxed javascript code)</li>
<li>py (Run sandboxed python code)</li>
<li>py3 (Run sandboxed python3 code)</li>
<li>run (If dev.js is loaded, this will run unsafe scripts on the bot using eval)</li>
<li>thotpm (Semi-anonymously have the bot DM someone. Only a couple people can use this command)</li>
<li>pmuser (Sends the specified user a pm from the bot, but tells the recipient who the sender was)</li>
<li>uptime (Amount of time the bot has been running)</li>
<li>version (Current bot version)</li>
<li>game (Information about a user's current visible status)</li>
<li>hg save (Causes hungry games to save all data manually)</li>
<li>hg debug (Dumps current guild's hungry games data into a file)</li>
<li>hg debugevents (Dumps all currently loaded events for the guild into a JSON files for download)</li>
<li>hg makemewin (Replies with a message telling the user their chances of winning have not increased)</li>
<li>hg makemelose (Replies with a message telling the user their chances of losing have not increased)</li>
<li>hg rigged (Replies with an image of the emoji that says &quot;rigged&quot;)</li>
<li>vi (Alias for <code>play nice try vi</code>)</li>
<li>airhorn (Plays airhorn sound)</li>
<li>rickroll (Plays Rick Astley in voice channel)</li>
<li>kokomo (Alias for <code>play kokomo</code>)</li>
<li>updategame (Changes bot's status)</li>
<li>reboot (Triggers a graceful shutdown of the entire bot. Assumes the parent process will restart automatically)</li>
<li>reload (Gracefully unloads all sub-modules, and re-loads and initializes them)</li>
<li>mainreload (Gracefully unloads all main-modules, and re-loads and initializes them)</li>
<li>unload (Gracefully unloads specified sub-modules, and will not load them again until <code>load</code> is used)</li>
<li>load (Attempts to load the specified sub-modules)</li>
<li>record (Record audio in a voice channel. Mention people to only record specific people.)</li>
<li>perms (Sends a message with the bitfields of all permissions, as well as the sender's and the bot's permissions for the guild and channel)</li>
<li>lookup (Finds information about a given ID)</li>
<li>sendto (Given a user or channel ID, the bot will send the message anonymously. Only trusted people can do this)</li>
<li>saveall (Trigger all submodules to save their data)</li>
<li>thanks (Thanks the person that was mentioned, or says &quot;You're welcome&quot;)</li>
<li>musicstats (Shows information about currently playing broadcasts)</li>
<li>uno stats (Shows information about current uno games)</li>
<li>chat (Forces the sent message to be sent to dialogflow instead of being treated as a normal command)</li>
<li>listcommands (Lists all commands that are currently registered with SpikeyBot~Commands)</li>
<li>getprefix (Used by chatbot so users can ask the bot, by mentioning it, what the prefix is)</li>
<li>whoami (Replies with the user's username, and full tag from different sources)</li>
<li>gettime (Replies with the server's timezone and time, as well as GMT)</li>
</ul>
<h1>Event Controlled</h1>
<ul>
<li>Added to guild
<ul>
<li>Sends a message to the top text channel introducing the bot.</li>
</ul>
</li>
<li>User in guild is banned
<ul>
<li>Sends a message saying the user was banned and by whom.</li>
<li>Disable with <code>togglebanmessages</code>.</li>
</ul>
</li>
</ul>
<hr>
<h1>Self-Hosting</h1>
<p>The bot is not designed to be easily hosted by others, but still may be done.<br>
The below steps outline the minimum required to get the SpikeyBot to run.</p>
<ol>
<li>Have a server/computer
<ul>
<li>SB is developed and tested solely on Debian Stretch (amd64), but other OS's may work.</li>
</ul>
</li>
<li>Install <a href="https://nodejs.org/">NodeJS</a>
<ul>
<li>The bot is currently running on NodeJS <a href="https://nodejs.org/dist/v10.16.0/">v10.16.0</a>. Other versions may work, but are untested.</li>
</ul>
</li>
<li>Download source code
<ul>
<li>Clone this repository <code>git clone https://github.com/CampbellCrowley/SpikeyBot-Discord.git</code> or click the green download button in GitHub.</li>
</ul>
</li>
<li>Install system dependencies
<ul>
<li><code>sudo apt install make libtool autoconf g++ ffmpeg</code> are required for the default installation.</li>
</ul>
</li>
<li>Install dependencies via NPM
<ul>
<li>Current version of NPM used is <code>v6.9.0</code>, but almost any version should be fine.</li>
<li>In the <code>SpikeyBot-Discord</code> directory, run <code>npm install</code>.</li>
</ul>
</li>
<li>Get a bot token from Discord
<ul>
<li>A token for the bot that you are trying to run from <a href="https://discordapp.com/developers/applications/">Discord</a> is required.</li>
<li>DO NOT give this token to anybody. Keep it private. The token allows anyone to be your bot.</li>
</ul>
</li>
<li>Configure SpikeyBot
<ul>
<li>Create <code>auth.js</code> in the <code>SpikeyBot-Discord/</code> directory with a line that says <code>exports.release = 'BOT_TOKEN';</code>, where <code>BOT_TOKEN</code> is the bot token from Discord.</li>
<li>Modify <code>./subModules.json</code> <code>&quot;release&quot;</code> section to have the subModules you want.</li>
<li>If you wish to have access to developer commands that normally only SpikeyRobot has access to, replace the <code>spikeyId</code> in <code>./src/common.js</code> with your account ID.</li>
</ul>
</li>
<li>Run SpikeyBot
<ul>
<li>Run <code>node src/SpikeyBot.js</code> in <code>SpikeyBot-Discord/</code> (working directory must be the project root).</li>
<li>Errors about <code>gApiCredentials.json</code> missing can be suppressed by removing <code>./tts.js</code> and <code>./chatbot.js</code> from <code>./subModules.json</code> since these require special authentication from Google's API. (https://console.cloud.google.com/)</li>
<li>All website related subModules will not work, and related errors can be suppressed by removing all subModules that start with <code>./web/</code> from <code>./subModules.json</code>.</li>
<li>If you are <strong>not</strong> running with <code>--shards</code> and wish to use the Hungry Games submodule, you must run node with <code>--experimental-worker</code>.</li>
</ul>
</li>
</ol>
<h1>Development</h1>
<ul>
<li>Unit tests exist
<ul>
<li>Covers all current commands with text-only replies.</li>
<li>Tests only send a message, and check for response messages that match expected output.
<ol>
<li>String exact match</li>
<li>String contains match</li>
<li>String does not contain match</li>
<li>String is not an error</li>
<li>Is an embed</li>
<li>Correct number of messages</li>
</ol>
</li>
<li>Does not check the content of embeds.</li>
<li>Need more thorough and flexible tests.</li>
</ul>
</li>
<li>Linting
<ul>
<li>All commits are checked by eslint using Google defaults.</li>
<li>Eslint is run with pre-commit git hook.</li>
</ul>
</li>
<li>Most code is moved into subModules for easier division and reloading.
<ul>
<li>Minimal mode only loads minimal features to allow for multiple bots to run without overlap.</li>
<li>Music subModule downloads audio in a separate thread but is still managed by the main event loop.</li>
<li>SubModules are stored in <code>./subModules.json</code>.
<ul>
<li>Path relative to module should be given (Usually relative to <code>./src/</code>).</li>
<li>Must be valid for directly being passed into <code>require()</code>.</li>
</ul>
</li>
<li>MainModules are loaded automatically by <code>./src/SpikeyBot.js</code> and are required.
<ul>
<li>SubModules are loaded by <code>./src/smLoader.js</code>.</li>
<li>Commands are all managed by <code>./src/commands.js</code>.</li>
<li>Additional MainModules can be loaded by placing them in <code>./mainModules.json</code></li>
</ul>
</li>
</ul>
</li>
<li>Files
<ul>
<li>Most persistent data is saved to disk when bot shuts down.
<ul>
<li>Hungry Games current state is saved and loaded.
<ul>
<li>Events and most messages are also read from file.</li>
</ul>
</li>
<li>Timers settings are saved.</li>
<li>Music queues are <em>not</em> saved, but may continue playing after unloading submodule.</li>
</ul>
</li>
</ul>
</li>
</ul></article>
    </section>







		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	<small>Website Contact: <a href="mailto:web@spikeybot.com">web@spikeybot.com</a>.</small><br><small>&copy; Copyright 2019, Campbell Crowley. <a href="https://docs.google.com/document/d/1SAC2aPxxeNqRjlZzjwrnCyyWWyt09ZP-AP7BDBjjQDg/edit?usp=sharing">Privacy Policy</a></small>
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a>
	
		on Wednesday, June 12, 2019 12:52 PM (-07:00)
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->

<script>
	(function ( i, s, o, g, r, a, m ) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function () {
			(i[r].q = i[r].q || []).push( arguments )
		}, i[r].l = 1 * new Date();
		a = s.createElement( o ),
			m = s.getElementsByTagName( o )[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore( a, m )
	})( window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga' );

	ga( 'create', 'UA-89923351-1', 'www.spikeybot.com' );
	ga( 'send', 'pageview' );
</script>



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>